{"version":3,"sources":["components/Name.js","components/PersonForm.js","components/Filter.js","components/Notification.js","components/ErrorMessage.js","services/persons.js","App.js","index.js"],"names":["Name","name","number","PersonForm","props","onSubmit","addName","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","Filter","search","handleSearch","Notification","message","className","ErrorMessage","baseUrl","axios","get","then","response","data","newObject","post","id","delete","console","log","put","App","useState","persons","setPersons","updated","setUpdated","setNameList","setNewName","setNewNumber","setSearch","notification","setNotification","errorMessage","setErrorMessage","useEffect","personService","map","event","target","filtered","filter","toLowerCase","includes","preventDefault","nameObject","updateObject","find","n","window","confirm","person","p","changedNumber","setTimeout","catch","error","updateNumber","createdPerson","concat","index","onClick","deleteFunction","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0718978c.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Name = ({ name }) => {\r\n  return (\r\n    <li>\r\n      {name.name} {name.number}\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Name;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.addName}>\r\n      <div>\r\n        name: <input value={props.newName} onChange={props.handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number:{\" \"}\r\n        <input value={props.newNumber} onChange={props.handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Filter = (props) => {\r\n  return (\r\n    <div>\r\n      filter shown with{\" \"}\r\n      <input value={props.search} onChange={props.handleSearch} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className=\"notification\">{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React from \"react\";\r\n\r\nconst ErrorMessage = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className=\"error\">{message}</div>;\r\n};\r\n\r\nexport default ErrorMessage;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => {\r\n    return response.data;\r\n  });\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst delete_person = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`).then((response) => {\r\n    console.log(\"deleted\");\r\n  });\r\n  return request;\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAll, create, delete_person, update };\r\n","import React, { useState, useEffect } from \"react\";\nimport Name from \"./components/Name\";\nimport PersonForm from \"./components/PersonForm\";\nimport Filter from \"./components/Filter\";\nimport Notification from \"./components/Notification\";\nimport ErrorMessage from \"./components/ErrorMessage\";\nimport personService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [updated, setUpdated] = useState([]);\n  const [nameList, setNameList] = useState([]);\n  const [idList, setIdList] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [notification, setNotification] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((response) => {\n      setPersons(response);\n      setUpdated(response);\n      setNameList(response.map((name) => name.name));\n    });\n  }, []);\n\n  const updateNumber = (id, newNumber) => {\n    const person = persons.find((p) => p.id === id);\n    const changedNumber = { ...person, number: newNumber };\n\n    personService\n      .update(id, changedNumber)\n      .then((response) => {\n        setPersons(\n          persons.map((person) => (person.id !== id ? person : response))\n        );\n        setUpdated(\n          persons.map((person) => (person.id !== id ? person : response))\n        );\n        setNotification(`Updated ${newName}`);\n        setTimeout(() => {\n          setNotification(null);\n        }, 5000);\n      })\n      .catch((error) => {\n        setErrorMessage(\n          `Information of ${newName} has already been removed from the server`\n        );\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 5000);\n      });\n  };\n\n  const addName = (event) => {\n    event.preventDefault();\n    const nameObject = {\n      name: newName,\n      number: newNumber,\n    };\n\n    //setNameList(persons.map((name) => name.name));\n    //const sameName = nameList.find((n) => n === newName);\n    //const sameNameIndex = nameList.IndexOf(sameName);\n    //console.log(sameNameIndex);\n    const updateObject = persons.find((n) => n.name === newName);\n    console.log(persons);\n    //console.log(updateObject);\n    //console.log(nameList);\n\n    //setIdList(persons.map((name) => name.id));\n    //console.log(idList);\n    //const newId = idList.find((n) => n === newName);\n    if (updateObject) {\n      window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one`\n      );\n      updateNumber(updateObject.id, newNumber);\n    } else {\n      personService\n        .create(nameObject)\n        .then((createdPerson) => {\n          setPersons(persons.concat(createdPerson));\n          setUpdated(persons.concat(createdPerson));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setNotification(`Added ${newName}`);\n          setTimeout(() => {\n            setNotification(null);\n          }, 5000);\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearch = (event) => {\n    setSearch(event.target.value);\n    if (event.target.value === \"\") {\n      setUpdated(persons);\n    } else {\n      const filtered = persons.filter((name) => {\n        return name.name\n          .toLowerCase()\n          .includes(event.target.value.toLowerCase());\n      });\n      setUpdated(filtered);\n    }\n  };\n\n  const deleteFunction = (id, name) => {\n    window.confirm(`Delete ${name}?`);\n    personService.delete_person(id).then((response) => {\n      personService.getAll().then((response) => {\n        setPersons(response);\n        setUpdated(response);\n      });\n      setNotification(`Deleted ${name}`);\n      setTimeout(() => {\n        setNotification(null);\n      }, 5000);\n    });\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} />\n      <ErrorMessage message={errorMessage} />\n      <Filter search={search} handleSearch={handleSearch} />\n      <h2>add a new</h2>\n      <PersonForm\n        addName={addName}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <ul>\n        {updated.map((name, index) => (\n          <div key={index}>\n            <Name key={index} name={name} number={name.number} />\n            <button onClick={() => deleteFunction(name.id, name.name)}>\n              delete\n            </button>\n          </div>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}