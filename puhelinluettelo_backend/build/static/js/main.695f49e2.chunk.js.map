{"version":3,"sources":["components/Name.js","components/PersonForm.js","components/Filter.js","components/Notification.js","components/ErrorMessage.js","services/persons.js","App.js","index.js"],"names":["Name","name","number","PersonForm","props","onSubmit","addName","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","Filter","search","handleSearch","Notification","message","className","ErrorMessage","baseUrl","axios","get","then","response","data","newObject","post","catch","err","console","log","id","delete","put","App","useState","persons","setPersons","updated","setUpdated","setNameList","setNewName","setNewNumber","setSearch","notification","setNotification","errorMessage","setErrorMessage","useEffect","personService","map","event","target","filtered","filter","toLowerCase","includes","preventDefault","nameObject","updateObject","find","n","window","confirm","person","p","changedNumber","setTimeout","error","updateNumber","createdPerson","concat","index","onClick","deleteFunction","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.695f49e2.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Name = ({ name }) => {\r\n  return (\r\n    <li>\r\n      {name.name} {name.number}\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Name;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.addName}>\r\n      <div>\r\n        name: <input value={props.newName} onChange={props.handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number:{\" \"}\r\n        <input value={props.newNumber} onChange={props.handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Filter = (props) => {\r\n  return (\r\n    <div>\r\n      filter shown with{\" \"}\r\n      <input value={props.search} onChange={props.handleSearch} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className=\"notification\">{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React from \"react\";\r\n\r\nconst ErrorMessage = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className=\"error\">{message}</div>;\r\n};\r\n\r\nexport default ErrorMessage;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => {\r\n    return response.data;\r\n  });\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request\r\n    .then((response) => response.data)\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nconst delete_person = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`).then((response) => {\r\n    console.log(\"deleted\");\r\n  });\r\n  return request;\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAll, create, delete_person, update };\r\n","import React, { useState, useEffect } from \"react\";\nimport Name from \"./components/Name\";\nimport PersonForm from \"./components/PersonForm\";\nimport Filter from \"./components/Filter\";\nimport Notification from \"./components/Notification\";\nimport ErrorMessage from \"./components/ErrorMessage\";\nimport personService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [updated, setUpdated] = useState([]);\n  const [nameList, setNameList] = useState([]);\n  const [idList, setIdList] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [notification, setNotification] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((response) => {\n      setPersons(response);\n      setUpdated(response);\n      setNameList(response.map((name) => name.name));\n    });\n  }, []);\n\n  const updateNumber = (id, newNumber) => {\n    const person = persons.find((p) => p.id === id);\n    const changedNumber = { ...person, number: newNumber };\n\n    personService\n      .update(id, changedNumber)\n      .then((response) => {\n        setPersons(\n          persons.map((person) => (person.id !== id ? person : response))\n        );\n        setUpdated(\n          persons.map((person) => (person.id !== id ? person : response))\n        );\n        setNotification(`Updated ${newName}`);\n        setTimeout(() => {\n          setNotification(null);\n        }, 5000);\n      })\n      .catch((error) => {\n        setErrorMessage(\n          `Information of ${newName} has already been removed from the server`\n        );\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 5000);\n      });\n  };\n\n  const addName = (event) => {\n    event.preventDefault();\n    const nameObject = {\n      name: newName,\n      number: newNumber,\n    };\n\n    //setNameList(persons.map((name) => name.name));\n    //const sameName = nameList.find((n) => n === newName);\n    //const sameNameIndex = nameList.IndexOf(sameName);\n    //console.log(sameNameIndex);\n    const updateObject = persons.find((n) => n.name === newName);\n    console.log(persons);\n    console.log(updateObject);\n    //console.log(nameList);\n\n    //setIdList(persons.map((name) => name.id));\n    //console.log(idList);\n    //const newId = idList.find((n) => n === newName);\n    if (updateObject) {\n      window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one`\n      );\n      updateNumber(updateObject.id, newNumber);\n    } else {\n      personService\n        .create(nameObject)\n        .then((createdPerson) => {\n          setPersons(persons.concat(createdPerson));\n          setUpdated(persons.concat(createdPerson));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setNotification(`Added ${newName}`);\n          setTimeout(() => {\n            setNotification(null);\n          }, 5000);\n        })\n        .catch((error) => {\n          console.log(error);\n          setErrorMessage(error);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    }\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearch = (event) => {\n    setSearch(event.target.value);\n    if (event.target.value === \"\") {\n      setUpdated(persons);\n    } else {\n      const filtered = persons.filter((name) => {\n        return name.name\n          .toLowerCase()\n          .includes(event.target.value.toLowerCase());\n      });\n      setUpdated(filtered);\n    }\n  };\n\n  const deleteFunction = (id, name) => {\n    window.confirm(`Delete ${name}?`);\n    personService.delete_person(id).then((response) => {\n      personService.getAll().then((response) => {\n        setPersons(response);\n        setUpdated(response);\n      });\n      setNotification(`Deleted ${name}`);\n      setTimeout(() => {\n        setNotification(null);\n      }, 5000);\n    });\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} />\n      <ErrorMessage message={errorMessage} />\n      <Filter search={search} handleSearch={handleSearch} />\n      <h2>add a new</h2>\n      <PersonForm\n        addName={addName}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <ul>\n        {updated.map((name, index) => (\n          <div key={index}>\n            <Name key={index} name={name} number={name.number} />\n            <button onClick={() => deleteFunction(name.id, name.name)}>\n              delete\n            </button>\n          </div>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}